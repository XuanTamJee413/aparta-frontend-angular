<div class="page-container">

  <header class="page-header">
    <h1>Tin tức & Thông báo</h1>
  </header>

  @if (loading) {
    <div class="loading-center">
      <p>Đang tải tin tức...</p>
    </div>
  } @else if (newsList.length === 0) {
    <p class="text-center text-muted">Chưa có thông báo nào.</p>
  } @else {

    <div class="announcements-list">
      @for (item of newsList; track item.newsId) {
        <section class="card announcement-card" (click)="openDetail(item)">
          <div class="announcement-content">
            <div class="announcement-header">
              <strong class="item-name">{{ item.title }}</strong>
            </div>

            <p class="item-description">
              {{ truncateContent(item.content) }}
            </p>

            <div class="announcement-footer">
              <div class="meta-tags">
                <span class="item-date">
                  {{ item.publishedDate | date:'dd/MM/yyyy' }}
                </span>
                <span class="item-category">
                  {{ item.authorName }}
                </span>
              </div>

              <button class="btn btn-secondary btn-small" (click)="$event.stopPropagation(); openDetail(item)">
                Xem chi tiết →
              </button>
            </div>
          </div>
        </section>
      }
    </div>
  }
</div>

<!-- DIALOG CHI TIẾT TIN TỨC -->
<dialog #newsDialog class="news-dialog" (click)="closeDialog()">
  <div class="dialog-content" (click)="$event.stopPropagation()">
    @if (selectedNews) {
      <header class="dialog-header">
        <h2>{{ selectedNews.title }}</h2>
        <button class="btn-close" (click)="closeDialog()">×</button>
      </header>

      <div class="dialog-body">
        <div class="dialog-meta">
          <span class="author">Đăng bởi: <strong>{{ selectedNews.authorName }}</strong></span>
          <span class="date">Ngày {{ formatDate(selectedNews.publishedDate) }}</span>
        </div>

        <div class="dialog-text">
          <p [innerHTML]="selectedNews.content"></p>
        </div>
      </div>

      <footer class="dialog-footer">
        <button class="btn btn-primary" (click)="closeDialog()">Đóng</button>
      </footer>
    }
  </div>
</dialog>