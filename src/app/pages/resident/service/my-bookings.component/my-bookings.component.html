<h2 class="section-title">L·ªãch s·ª≠ ƒë·∫∑t d·ªãch v·ª•</h2>

<div *ngIf="isLoading" class="loading-state">
  <div class="spinner"></div>
  <p>ƒêang t·∫£i l·ªãch s·ª≠...</p>
</div>

<div *ngIf="errorMessage" class="alert error">
  {{ errorMessage }}
</div>

<div *ngIf="!isLoading && myBookings.length === 0" class="empty-state">
  <div class="empty-icon">üìÇ</div>
  <p>B·∫°n ch∆∞a c√≥ l·ªãch s·ª≠ ƒë·∫∑t d·ªãch v·ª• n√†o.</p>
</div>

<div *ngIf="myBookings.length > 0" class="table-wrapper">
  <table class="booking-table">
    <thead>
      <tr>
        <th>D·ªãch v·ª•</th>
        <th>Ng√†y ƒë·∫∑t</th>
        <th>Tr·∫°ng th√°i</th>
        <th>Ghi ch√∫ c·ªßa t√¥i</th>
        <th>Ghi ch√∫ nh√¢n vi√™n</th>
        <th>S·ªë ti·ªÅn</th>
        <th>H√†nh ƒë·ªông</th> </tr>
    </thead>
    <tbody>
      <tr *ngFor="let booking of myBookings" class="booking-row">
        <td class="cell-service">{{ booking.serviceName }}</td>
        <td class="cell-date">{{ booking.bookingDate | date:'dd/MM/yyyy HH:mm' }}</td>
        <td class="cell-status">
          <span class="status-badge status-{{ booking.status.toLowerCase() }}">
            {{ booking.status }}
          </span>
        </td>
        <td class="cell-note">
          {{ booking.residentNote || '‚Äî' }}
        </td>
        <td class="cell-note">
          {{ booking.staffNote || '‚Äî' }}
        </td>
        <td class="cell-amount">
          {{ booking.paymentAmount | currency:'VND':'symbol':'1.0-0' }}
        </td>
        <td class="cell-action">
          <button 
            *ngIf="canCancel(booking.status)" 
            class="btn-cancel"
            (click)="onCancelBooking(booking.serviceBookingId)"
            [disabled]="isLoading">
            H·ªßy
          </button>
          
          <span *ngIf="!canCancel(booking.status)" class="text-muted">‚Äî</span>
        </td>
      </tr>
    </tbody>
  </table>
</div>